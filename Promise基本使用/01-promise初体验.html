<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style>
		#btn {
			width: 100px;
			height: 30px;
			border-radius: 5px;
			background-color: aqua;
		}
	</style>
</head>

<body>
	<div>
		<h2>Promise 初体验</h2>
		<button id="btn">点击抽奖</button>
	</div>
	<script>
		function rand(m, n) {
			return Math.ceil(Math.random() * (n - m + 1)) + m - 1;
		}
		// 获取元素对象
		const btn = document.getElementById('btn')
		// 绑定单击事件
		btn.addEventListener('click', function () {
			// // 定时器
			// setTimeout(() => {
			// 	//获取1--100的随机数
			// 	let num = rand(1, 100)
			// 	// 判断
			// 	if(num<=30){
			// 		alert('中奖啦！！！')
			// 	}else{
			// 		alert('再接再厉')
			// 	}
			// }, 1000)

			//promise 形式实现
			// resolve 解决  函数类型的数据
			// reject  拒绝	 函数类型的数据
			const p = new Promise((resolve, reject) => {
				// 定时器
				setTimeout(() => {
					//获取1--100的随机数
					let num = rand(1, 100)
					// 判断
					if(num<=50){
						resolve(num);//当调用resolve方法后会将promise对象的状态设置成功
					}else{
						reject(num);//当调用reject方法后会将promise对象的状态设置失败
					}
				}, 1000)
			})
			// 调用then方法 then方法调用两个函数，第一个函数是对象成功时的回调，第二个时对象失败后的回调
			// value 值
			//reason 理由
			p.then((value)=>{
				alert('中奖啦！！！'+','+'你的中奖号码为'+value)
			},(reason)=>{
				alert('再接再厉'+','+'你的号码是'+reason)
			})
		})

	</script>
</body>

</html>